# üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ  
- [üöÄ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞-learn-fastapi-authorization)  
- [üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫-–ø—Ä–æ–µ–∫—Ç–∞)  
- [üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)  
- [‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)  
- [üß∞ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)  
- [üìù TODO](#todo)  

---

# üöÄ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ *learn-FastAPI-authorization*  
**–≠—Ç–æ –±—ç–∫–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏** –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞–≤—ã–∫–æ–≤:  
- üîê *–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è*: OAuth2 + JWT + –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ email  
- üöÄ *–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å*: Async FastAPI + MongoDB  
- üì¶ *–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –∫ –∑–∞–ø—É—Å–∫—É*: –î–æ–∫–µ—Ä  
- ‚úâÔ∏è *–†–∞–±–æ—Ç–∞ —Å email*: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SMTP  

&gt; üí° *–¶–µ–ª—å*: –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—é, —á—Ç–æ –≤—ã —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –±—ç–∫–µ–Ω–¥-—Å—Ç–µ–∫–µ.  

---

# üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫  

## ‚ö†Ô∏è –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è  
- **Docker** (v20.10.0+)  
- **Docker Compose** (v1.29.0+)  
- **Git**  

## üö¶ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è  

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è  
```bash
git clone https://github.com/Marat22/learn-FastAPI-authorization.git
cd learn-FastAPI-authorization
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∏–º–µ—Ä—É:  
```ini
# üîë JWT
SECRET_KEY=your_super_secret_key_here
ALGORITHM=HS256

# üçÉ MongoDB
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=secure_password

# ‚úâÔ∏è SMTP (–ø—Ä–∏–º–µ—Ä –¥–ª—è Gmail)
MAIL=your@gmail.com
MAIL_PASSWORD=app-specific-password
SMTP_SERVER=smtp.gmail.com
```

### 3. –ó–∞–ø—É—Å–∫  
```bash
docker compose up -d --build
```
**–ì–æ—Ç–æ–≤–æ!** –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ [http://localhost:8000](http://localhost:8000)  

### 4. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã  
| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |  
|----------|---------|  
| –û—Å—Ç–∞–Ω–æ–≤–∫–∞ | `docker compose down` |  
| –õ–æ–≥–∏ FastAPI | `docker compose logs -f web` |  
| –õ–æ–≥–∏ MongoDB | `docker compose logs -f mongo` |  
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API | [http://localhost:8000/docs](http://localhost:8000/docs) |  

---

# üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞  
```mermaid
flowchart LR
    subgraph learn-FastAPI-authorization
        B[FastAPI]
        C[(MongoDB)]
    end
    A[Frontend] -->|API Calls| B[FastAPI]
    B -->|CRUD Operations| C[(MongoDB)]
    B -->|Send Emails| D[üìß SMTP]
    style B fill:#009688,color:white
    style C fill:#4CAF50,color:white
```

## üóÉ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î  
```javascript
{
    _id: ObjectId,  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    username: str,  // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    email: str,      // –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    hashed_password: str,  // –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    is_active: bool,  // –ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –ø–æ—á—Ç—É –∏–ª–∏ –Ω–µ—Ç
    todo: [           // –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        {
            _id: ObjectId,  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –∑–∞–¥–∞—á
            title: str,     // –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∑–∞–¥–∞—á
            order_num: int, // –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã –∑–∞–¥–∞—á
            tasks: [        // –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –≤ –≥—Ä—É–ø–ø–µ
                {
                    _id: ObjectId,  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏
                    title: str,     // –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
                    description: str,  // –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
                    order_num: int, // –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏
                },
                ...
            ]
        },
        ...
    ]
}
```

### ‚ùì –ü–æ—á–µ–º—É —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞?  
- ‚ö° **–ë—ã—Å—Ç—Ä–æ** ‚Äì –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞ 1 –∑–∞–ø—Ä–æ—Å  
- üß© **–ü—Ä–æ—Å—Ç–æ** ‚Äì –Ω–µ –Ω—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ JOIN-–æ–ø–µ—Ä–∞—Ü–∏–∏  
- üèÜ **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ** ‚Äì –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö  

&gt; üí° *–ü—Ä–∏–º–µ—Ä –∏–∑ –∫–æ–¥–∞*:  
&gt; ```python
&gt; @tasks_router.get(/)
&gt; async def get_tasks(user = Depends(get_current_user)):
&gt;     return user[todo]  // üéØ –í—Å–µ –∑–∞–¥–∞—á–∏ ‚Äì –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ!
&gt; ```

---

# ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª  

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
- üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –ø–æ email  
- üîë OAuth2 + JWT –≤ HTTP-only cookies  
- ‚úâÔ∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ –ø–æ—á—Ç—É  

## üë®‚Äçüíª –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏  
- ‚úÖ CRUD –¥–ª—è –∑–∞–¥–∞—á –∏ –≥—Ä—É–ø–ø  
- üîÑ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `order_num`  
- üõ° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é  

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ  
- üê≥ –ì–æ—Ç–æ–≤—ã–π Docker-–æ–±—Ä–∞–∑  
- ‚ö° Async I/O –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  

---

# üß∞ –°—Ç–µ–∫  
| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |  
|-----------|------------|  
| **Backend** | FastAPI, Pydantic, OAuth2 |  
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | MongoDB (async) |  
| **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | Docker, Docker Compose |  
| **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è** | SMTP, MIME |  

---

# üìù TODO  
- [ ] –ü—Ä–æ–¥–∞–∫—à–Ω-–¥–µ–ø–ª–æ–π  
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã (pytest)  
- [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∑–∞–¥–∞—á  
- [ ] –°—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á  
- [ ] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è –∑–∞–¥–∞—á (High/Medium/Low)  
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)  